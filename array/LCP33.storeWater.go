package main

import (
	"fmt"
	"sort"
)

func main() {
	bkt, vat := []int{1, 3}, []int{6, 8}
	bkt, vat = []int{9, 0, 1}, []int{0, 2, 2}
	bkt = []int{
		3710, 6067, 2993, 70, 2340, 2748, 9385, 3027, 3456, 5246, 9739, 1220, 9539, 9074, 4729, 7051, 8462, 6908, 3649, 9996, 8890, 2980, 4350, 7350, 6344, 6759, 4420, 269, 9341, 648, 7737, 8133, 3717, 2766, 5807, 4338, 2077, 5775, 4905, 7262, 1258, 613, 3837, 3475, 437, 3739, 9814, 4790, 2075, 7722, 3290, 5685, 3499, 6992, 4421, 934, 6004, 5763, 3463, 6138, 8818, 445, 4778, 4979, 126, 3969, 2994, 87, 3739, 8582, 9559, 8326, 9132, 257, 8928, 9147, 1615, 4665, 9828, 3925, 6435, 5326, 836, 519, 298, 600, 5503, 273, 9580, 5383, 8966, 4810, 1386, 7207, 8060, 678, 8837, 6946, 1210, 945,
	}
	vat = []int{
		6304, 6509, 4276, 9645, 6455, 8167, 9667, 4385, 8872, 7889, 9936, 4413, 9922, 9894, 8065, 7627, 9225, 9907, 7055, 9996, 9439, 3351, 9317, 8363, 9383, 6850, 4621, 5389, 9508, 3391, 9650, 8363, 8719, 5594, 8770, 5403, 7107, 9941, 9254, 9355, 4614, 4640, 4896, 8759, 4397, 8441, 9870, 9906, 2396, 8092, 6939, 9432, 8182, 9090, 8029, 4930, 7772, 7066, 7279, 7778, 9529, 2947, 6552, 6930, 5260, 8470, 8478, 1371, 9453, 9767, 9888, 9964, 9960, 3990, 9391, 9377, 3063, 5374, 9880, 7684, 7864, 7078, 2622, 3754, 617, 9773, 9415, 8026, 9883, 5735, 9233, 6715, 9105, 7932, 9178, 1081, 9340, 7284, 6621, 1965,
	}
	fmt.Println(storeWater(bkt, vat))
}

// todo: 通过率 60%
func storeWater(bucket []int, vat []int) int {
	n := len(bucket)
	sli := make([][4]int, n)

	for i := 0; i < n; i++ {
		sli[i][0], sli[i][1], sli[i][2] = bucket[i], bucket[i], vat[i]
		if bucket[i] == 0 && vat[i] != 0 {
			sli[i][3] = 1 + vat[i]
		} else if bucket[i] == 0 {
			sli[i][3] = 0
		} else if vat[i]%bucket[i] == 0 {
			sli[i][3] = vat[i] / bucket[i]
		} else {
			sli[i][3] = 1 + vat[i]/bucket[i]
		}
	}

	fmt.Println(sli)
	fmt.Println("******")

	for {

		sort.Slice(sli, func(i, j int) bool {
			return sli[i][3] > sli[j][3]
		})

		fmt.Println(sli)

		mCnt, inc, cnt := sli[0][3], 0, 0
		sli[0][1] += 1
		inc = sli[0][1] - sli[0][0]

		if sli[0][2]%sli[0][1] == 0 {
			cnt = sli[0][2]/sli[0][1] + inc
		} else {
			cnt = sli[0][2]/sli[0][1] + 1 + inc
			fmt.Println("---")
			fmt.Println(sli[0], cnt, mCnt)
		}
		if cnt < mCnt {
			sli[0][3] = cnt
		} else {
			return mCnt
		}
	}

}
